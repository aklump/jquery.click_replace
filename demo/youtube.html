<!DOCTYPE html>
<html>
<head>
  <title>Demo of jquery.click_replace.js and youtube</title>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.2.3/jquery.min.js"></script>
  <script src="https://www.youtube.com/iframe_api"></script>
  <script src="../jquery.click_replace.min.js"></script>
  <script>
   </script>
</head>
<body>
  <h1>Demo of jquery.click_replace.js and youtube</h1>
  
  <!-- Issues: IE 11 does not allow the video to start playing -->
  
  <div class="click-replace">
    <img src="images/still-shot.jpg" alt="Still shot image from film">
    <div id="player"></div>
  </div>
  <p class="text-muted">jquery.click_replace.js is brought to you by <a href="http://www.intheloftstudios.com">In the Loft Studios</a></p>
  <script>
    var clickReplaceDemo = {};
    function onYouTubeIframeAPIReady() {

      // Set youtube to the player object found at #player
      // https://developers.google.com/youtube/iframe_api_reference
      clickReplaceDemo.player = new YT.Player('player', {
        height: '390',
        width: '640',
        videoId: 'Q_qodDo4cXo',
        events: {
          'onStateChange': function(event) {
            if(event.data === 0) {          
              clickReplaceDemo.original.revert();
            }
          }
        }
      });

      (function($) {
        $('document').ready(function(){

          // Create original, an object with method .revert() to put things back
          // when the video is done playing.
          clickReplaceDemo.original = $('.click-replace img').clickReplace($('.click-replace iframe'), {
            
            // Called when the user clicks the image, the video is played
            'replaceCallback': function () {
              if (clickReplaceDemo.player.playVideo) {
                clickReplaceDemo.player.playVideo();  
              }
            }
          });
        });
      })(jQuery);      
    }
  </script>  
</body>
</html>
